<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denmara Image Format Conversion Tool</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.lordicon.com/bhenfmcm.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        }
        .hover-scale {
            transition: transform 0.3s ease-in-out;
        }
        .hover-scale:hover {
            transform: scale(1.05);
        }
        .loader {
            border-top-color: #a855f7;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        @-webkit-keyframes spinner {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .blob {
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            background: linear-gradient(45deg, #6366f1 0%, #a855f7 100%);
            filter: blur(40px);
        }
        .image-preview-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .overlay {
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .drag-drop-area {
            border: 2px dashed #a855f7;
            transition: all 0.3s ease;
        }
        .drag-drop-area.dragover {
            background-color: rgba(168, 85, 247, 0.1);
            border-color: #6366f1;
        }
        .header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .footer {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
        }
        .footer a {
            transition: color 0.3s ease;
        }
        .footer a:hover {
            color: #a855f7;
        }
        .benefit-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .benefit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        .faq-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .faq-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .action-button {
            @apply bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-3 px-6 rounded-lg hover:from-purple-600 hover:to-indigo-600 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-opacity-50 flex items-center justify-center;
        }
        .progress-bar {
            width: 100%;
            background-color: #4a5568;
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress {
            width: 0;
            height: 6px;
            background-color: #a855f7;
            transition: width 0.3s ease;
        }
        .format-dropdown {
            position: relative;
            display: inline-block;
        }
        .format-dropdown-content {
            display: none;
            position: absolute;
            background-color: #1f2937;
            min-width: 250px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 8px;
            padding: 10px;
        }
        .format-dropdown:hover .format-dropdown-content {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .format-option {
            padding: 12px;
            text-decoration: none;
            display: block;
            color: #e2e8f0;
            transition: all 0.3s ease;
            border-radius: 6px;
        }
        .format-option:hover {
            background-color: #374151;
            color: #a855f7;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #a855f7;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
         .format-option {
            background-color: #2d3748;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .format-option:hover {
            background-color: #4a5568;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }
        .action-button {
            background-color: #6b46c1;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .action-button:hover {
            background-color: #7c3aed;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4">
    <header class="py-4 px-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <a href="/" class="flex items-center">
                <img src="Denmara__1_-removebg-preview.png" alt="Denmara Logo" class="w-12 h-12 sm:w-16 sm:h-16">
                <span class="ml-2 text-xl sm:text-2xl font-bold">Denmara</span>
            </a>
            <a href="/login.html" id="loginText" class="hover:text-purple-400 transition duration-300">Login</a>
        </div>
    </header>

    <main class="flex-grow mt-20">
        <div class="bg-gray-800 rounded-3xl shadow-2xl w-full max-w-4xl mx-auto my-8">
            <div class="bg-gradient-to-r from-purple-500 to-indigo-500 p-6 sm:p-8 rounded-t-3xl">
                <h1 class="text-3xl sm:text-4xl font-bold text-center">Image Format Conversion Tool</h1>
                <p class="text-gray-200 text-center mt-2">Convert your images to various formats with ease</p>
            </div>

            <div class="p-6 sm:p-8">
                <div id="dragDropArea" class="mb-8 flex flex-col items-center justify-center h-40 border-2 border-dashed border-purple-500 rounded-lg cursor-pointer">
                    <input type="file" id="fileInput" accept="image/*" class="hidden" multiple>
                    <lord-icon
                        src="https://cdn.lordicon.com/nxooksci.json"
                        trigger="hover"
                        colors="primary:#a855f7,secondary:#6366f1"
                        style="width:64px;height:64px;">
                    </lord-icon>
                    <p class="mt-2 text-sm text-gray-400 text-center">Choose files or<br>Drag and Drop here!</p>
                </div>

                <div id="imagePreview" class="mb-8 hidden">
                    <div id="previewContainer" class="flex flex-wrap justify-center gap-4"></div>
                </div>

                <div id="conversionOptions" class="mb-8 hidden">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Select output format:</label>
                    <div class="relative">
                        <button id="formatDropdownBtn" class="bg-gray-700 text-white p-2 rounded-lg w-full text-left flex justify-between items-center">
                            <span id="selectedFormat">PNG</span>
                            <i class="fas fa-chevron-down ml-2"></i>
                        </button>
                        <div id="formatDropdownContent" class="hidden absolute z-10 mt-1 w-full bg-gray-700 rounded-md shadow-lg">
                            <div class="p-2 grid grid-cols-2 gap-2">
                             <div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="png">PNG</div
                            <div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="jpeg">JPEG</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="webp">WebP</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="gif">GIF</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="bmp">BMP</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="tiff">TIFF</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="ico">ICO</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="svg">SVG</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="pdf">PDF</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="eps">EPS</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="heic">HEIC</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="jp2">JPEG 2000 (JP2)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="psd">Photoshop (PSD)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="raw">RAW</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="tga">Targa (TGA)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="hdr">HDR</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="exr">OpenEXR (EXR)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="dds">DirectDraw Surface (DDS)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="xcf">GIMP Image (XCF)</div>
<div class="format-option bg-gray-600 hover:bg-gray-500 p-2 rounded cursor-pointer" data-format="jxr">JPEG XR (JXR)</div>

                    </div>


                <div class="flex justify-center space-x-4">
                    <button id="convertBtn" class="action-button flex items-center bg-purple-500 text-white p-2 rounded-lg">
                        <i class="fas fa-exchange-alt mr-2"></i>
                        <span>Convert Images</span>
                    </button>
                    <button id="downloadBtn" class="action-button flex items-center bg-green-500 text-white p-2 rounded-lg">
                        <i class="fas fa-download mr-2"></i>
                        <span>Download All</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer mt-16 py-6 px-6">
        <div class="max-w-6xl mx-auto flex flex-col items-center">
            <div class="mb-4">
                <a href="/terms" class="text-gray-300 hover:text-white mx-2">Terms and Conditions</a>
                <a href="/privacy" class="text-gray-300 hover:text-white mx-2">Privacy Policy</a>
            </div>
            <div class="text-gray-400 text-sm">
                &copy;2024 denmara.com
            </div>
        </div>
    </footer>

    <button id="scrollTopBtn" class="fixed bottom-4 right-4 bg-purple-500 text-white p-2 rounded-full shadow-lg transition-opacity duration-300 opacity-0 invisible">
        <i class="fas fa-arrow-up"></i>
    </button>

    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script>
 document.addEventListener('DOMContentLoaded', function () {
    const dragDropArea = document.getElementById('dragDropArea');
    const fileInput = document.getElementById('fileInput');
    const imagePreview = document.getElementById('imagePreview');
    const previewContainer = document.getElementById('previewContainer');
    const conversionOptions = document.getElementById('conversionOptions');
    const convertBtn = document.getElementById('convertBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const selectedFormatDisplay = document.getElementById('selectedFormat');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const scrollTopBtn = document.getElementById('scrollTopBtn');

    let selectedFiles = [];
    let selectedFormat = 'png';

    // Initialize loading overlay and download button as hidden
    loadingOverlay.style.display = 'none';
    downloadBtn.classList.add('hidden');

    // User avatar update
    const userAvatar = localStorage.getItem('userAvatar');
    const loginText = document.getElementById('loginText');
    if (userAvatar && loginText) {
        loginText.innerHTML = `<img src="${userAvatar}" alt="User Avatar" class="w-8 h-8 rounded-full">`;
    }

    // Drag and Drop Events
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dragDropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
        dragDropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dragDropArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
        dragDropArea.classList.add('dragover');
    }

    function unhighlight() {
        dragDropArea.classList.remove('dragover');
    }

    dragDropArea.addEventListener('drop', handleDrop, false);

    dragDropArea.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', function (e) {
        handleFiles(this.files);
    });

    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        handleFiles(files);
    }

    function handleFiles(files) {
        selectedFiles = Array.from(files).filter(file => file.type.startsWith('image/'));
        if (selectedFiles.length > 0) {
            displayPreviews(selectedFiles);
        } else {
            showError("Please select at least one image file.");
        }
    }

    function displayPreviews(files) {
        previewContainer.innerHTML = '';
        files.forEach((file, index) => {
            const reader = new FileReader();
            reader.onload = function (e) {
                const previewWrapper = document.createElement('div');
                previewWrapper.className = 'relative';
                const previewImg = document.createElement('img');
                previewImg.src = e.target.result;
                previewImg.className = 'w-24 h-24 object-cover rounded-lg';
                previewWrapper.appendChild(previewImg);

                const removeBtn = document.createElement('button');
                removeBtn.innerHTML = '&times;';
                removeBtn.className = 'absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center';
                removeBtn.onclick = () => removeFile(index);
                previewWrapper.appendChild(removeBtn);

                previewContainer.appendChild(previewWrapper);

                if (index === files.length - 1) {
                    imagePreview.classList.remove('hidden');
                    conversionOptions.classList.remove('hidden');
                    convertBtn.classList.remove('hidden');
                }
            };
            reader.readAsDataURL(file);
        });
    }

    function removeFile(index) {
        selectedFiles.splice(index, 1);
        displayPreviews(selectedFiles);
        if (selectedFiles.length === 0) {
            imagePreview.classList.add('hidden');
            conversionOptions.classList.add('hidden');
            convertBtn.classList.add('hidden');
            downloadBtn.classList.add('hidden');
        }
    }

    // Handle format selection
    document.querySelectorAll('.format-option').forEach(option => {
        option.addEventListener('click', function () {
            selectedFormat = this.getAttribute('data-format');
            selectedFormatDisplay.textContent = this.textContent;
            document.querySelectorAll('.format-option').forEach(opt => opt.classList.remove('bg-gray-500'));
            this.classList.add('bg-gray-500'); // Highlight the selected option
        });
    });

    // Convert button action
    convertBtn.addEventListener('click', function () {
        if (selectedFiles.length > 0) {
            showLoading();
            convertImages(selectedFiles, selectedFormat)
                .then(convertedBlobs => {
                    hideLoading();
                    showSuccessWithDownload(convertedBlobs, selectedFormat);
                })
                .catch(error => {
                    hideLoading();
                    showError("Failed to convert images. Please try again.");
                    console.error('Conversion error:', error);
                });
        } else {
            showError("Please select at least one image first.");
        }
    });

    function convertImages(files, format) {
        return Promise.all(files.map(file => convertImage(file, format)));
    }

    function convertImage(file, format) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = new Image();
                img.onload = function () {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);

                    let mimeType = getMimeType(format);
                    if (!mimeType) {
                        reject(new Error('Unsupported format'));
                        return;
                    }

                    canvas.toBlob(blob => {
                        resolve(blob);
                    }, mimeType);
                };
                img.onerror = function () {
                    reject(new Error("Image load failed"));
                };
                img.src = e.target.result;
            };
            reader.onerror = function () {
                reject(new Error("File reading failed"));
            };
            reader.readAsDataURL(file);
        });
    }

    function getMimeType(format) {
        const formatMap = {
            png: 'image/png',
            jpeg: 'image/jpeg',
            jpg: 'image/jpeg',
            webp: 'image/webp',
            gif: 'image/gif',
            bmp: 'image/bmp',
            tiff: 'image/tiff',
            ico: 'image/x-icon',
            svg: 'image/svg+xml',
            pdf: 'application/pdf',
            eps: 'application/postscript',
            heic: 'image/heic',
            jp2: 'image/jp2',
            psd: 'image/vnd.adobe.photoshop',
            raw: 'image/raw',
            tga: 'image/x-tga',
            hdr: 'image/vnd.radiance',
            exr: 'image/x-exr',
            dds: 'image/vnd.ms-dds',
            xcf: 'image/x-xcf',
            jxr: 'image/vnd.ms-photo',
        };
        return formatMap[format.toLowerCase()] || null;
    }

    function showSuccessWithDownload(blobs, format) {
        swal({
            title: "Success!",
            text: "Images converted successfully. Would you like to download them?",
            icon: "success",
            buttons: {
                cancel: "Cancel",
                download: {
                    text: "Download",
                    value: "download",
                },
            },
        })
        .then((value) => {
            if (value === "download") {
                downloadImages(blobs, format);
            }
        });
    }

    function downloadImages(blobs, format) {
        if (blobs.length === 1) {
            saveAs(blobs[0], `converted_image.${format}`);
        } else {
            const zip = new JSZip();
            blobs.forEach((blob, index) => {
                zip.file(`converted_image_${index + 1}.${format}`, blob);
            });
            zip.generateAsync({type: "blob"})
                .then(function(content) {
                    saveAs(content, "converted_images.zip");
                });
        }
    }

    function showLoading() {
        loadingOverlay.style.display = 'flex';
    }

    function hideLoading() {
        loadingOverlay.style.display = 'none';
    }

    function showError(message) {
        swal("Error", message, "error");
    }

    // Scroll to top functionality
    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 100) {
            scrollTopBtn.classList.remove('opacity-0', 'invisible');
            scrollTopBtn.classList.add('opacity-100', 'visible');
        } else {
            scrollTopBtn.classList.add('opacity-0', 'invisible');
            scrollTopBtn.classList.remove('opacity-100', 'visible');
        }
    });

    scrollTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Initialize AOS (Animate On Scroll) library
    AOS.init();
});

</script>


    </body>
</html>
